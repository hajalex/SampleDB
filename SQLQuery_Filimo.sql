USE master
GO
DROP DATABASE IF EXISTS [dbFilimo]
GO
CREATE DATABASE [dbFilimo]
GO
USE [dbFilimo]

-----------------------------------------------------------------
----------------------------------------------------------------- CREATE TABLE

GO
CREATE TABLE [Format](
	[FormatId] TINYINT PRIMARY KEY, 
	[FormatTitle] NVARCHAR(20) NOT NULL
)

GO
CREATE TABLE [Genres](
	[GenreId] TINYINT PRIMARY KEY IDENTITY(1,1),
	[GenreTitle] NVARCHAR(30) NOT NULL
)

GO
CREATE TABLE [Movie](
	[MovieId] INT PRIMARY KEY,
	[MovieTitle] NVARCHAR(40) NOT NULL,
	[FormatId] TINYINT,
	FOREIGN KEY([FormatId]) REFERENCES [Format]([FormatId])
)

GO
CREATE TABLE [Description](
	[MovieId] INT PRIMARY KEY,
	[GenreId] TINYINT NOT NULL,
	[Score] DECIMAL(2,1) NULL,
	[Time(min)] INT NOT NULL,
	[MadeIn] NVARCHAR(30) NOT NULL,
	[Year] CHAR(4) NOT NULL,
	[AgeLimit] CHAR(1) NOT NULL,
	[Subtitles] CHAR(1) NOT NULL,
	[Short] NVARCHAR(300)
	FOREIGN KEY ([MovieId]) REFERENCES [Movie]([MovieId]) ON DELETE CASCADE,
	FOREIGN KEY ([GenreId]) REFERENCES [Genres]([GenreId])
)

GO
CREATE TABLE [Producer](
	[MovieId] INT NOT NULL,
	[FirstName] NVARCHAR(20) NOT NULL,
	[LastName] NVARCHAR(30) NOT NULL,
	[Role] NVARCHAR(30) NOT NULL,
	FOREIGN KEY ([MovieId]) REFERENCES [Movie]([MovieId]) ON DELETE CASCADE,
)

GO
CREATE TABLE [Actors](
	[MovieId] INT NOT NULL,
	[FirstName] NVARCHAR(20) NOT NULL,
	[LastName] NVARCHAR(30) NOT NULL,
	FOREIGN KEY ([MovieId]) REFERENCES [Movie]([MovieId]) ON DELETE CASCADE,
)

GO
CREATE TABLE [User](
	[UserId] INT PRIMARY KEY IDENTITY(1,1),
	[FirstName] NVARCHAR(20) NOT NULL,
	[LastName] NVARCHAR(30) NOT NULL,
	[Age] TINYINT NOT NULL,
	[Phone] CHAR(12) NOT NULL,
	[RegisterDate] DATETIME NULL,
	[IsActive] BIT NOT NULL
)

GO
CREATE TABLE [UserViews](
	[UserId] INT,
	[MovieId] INT NULL
	FOREIGN KEY ([MovieId]) REFERENCES [Movie]([MovieId]) ON DELETE CASCADE,
	FOREIGN KEY ([UserId]) REFERENCES [User]([UserId])
)

-----------------------------------------------------------------
----------------------------------------------------------------- INSERT INTO

GO
INSERT INTO [Format]([FormatId], [FormatTitle]) 
			 VALUES (1, N'فیلم'),
					(2, N'سریال')


GO
INSERT INTO [Genres]([GenreTitle]) 
			 VALUES (N'کمدی'),
					(N'درام'),
					(N'موزیکال'),
					(N'تریلر'),
					(N'اکشن'),
					(N'عاشقانه'),
					(N'معمایی'),
					(N'علمی_تخیلی'),
					(N'ترسناک'),
					(N'ماجراجویی'),
					(N'مستند'),
					(N'جنایی'),
					(N'خانوادگی'),
					(N'هیجان انگیز')


GO
INSERT INTO [Movie]([MovieId], [MovieTitle], [FormatId]) 
			VALUES (100, N'لانه کرکس' , 1),
			       (101, N'سلفی با دموکراسی' , 1),
				   (102, N'از تاریکی', 1),
				   (103, N'تاریخ صدور', 2),
				   (104, N'موش بی باک', 2),
				   (105, N'ای او', 1),
				   (106, N'مکس', 1),
				   (107, N'یاغی', 2),
				   (108, N'بارکد', 1),
				   (109, N'گربه سگ', 2),
				   (110, N'آدم کش', 1),
				   (111, N'انفرادی', 1),
				   (112, N'پایتخت', 2),
				   (113, N'تی تی', 1),
				   (114, N'پسر', 1),
				   (115, N'دختر آرام', 1),
				   (116, N'رهایم کن', 2),
				   (117, N'خانه اهریمنی', 1),
				   (118, N'ودا', 1),
				   (119, N'تظاهر به مرگ', 1),
				   (120, N'دستفروش', 1)
						 

GO
INSERT INTO [Description]([MovieId], [GenreId], [Score], [Time(min)], [MadeIn], [Year], [AgeLimit], [Subtitles], [Short])
                   VALUES(100, 5, 4.1, 102, 'USA', 2023,'Y', 'Y', N'انتقام گرفتن یک خلبان آمریکایی از سرهنگ نازی'),
						 (101, 1, 8.4, 93, 'IRI', 1398, 'N', 'N', N'زندگی کسانی که در جنگ تحمیلی حضور داشته اند'),
						 (102, 9, 7.2, 88, 'USA', 2023, 'Y', 'Y', N'زنی که در حال ترک مواد مخدر است'),
						 (103, 11, 8.9, 150, 'IRI', 1397, 'N', 'N', N'ویژگی نسل های مختلف'),
						 (104, 5, 8.6, 250, 'ENG', 2015, 'N', 'N', N'ماجراجویی های موش بی باک'),
						 (105, 2, 6.6, 81, 'NLD', 2022, 'Y', 'Y', N'تجربه یک خر خاکستری از اروپای مدرن'),
						 (106, 3, 8.8, 106, 'IRI', 1383 , 'N', 'N', N'دعوت وزارت ارشاد از یک رهبر ارکستر آمریکایی'),
						 (107, 6, 9.4, 1452, 'IRI', 1401, 'N', 'N', N'روایتگر مسیر پر فراز و نشیب یک قهرمان'),
						 (108, 12, 9.2, 100, 'IRI', 1394, 'N', 'N', N'اتفاقاتی که برای یک پسر جوان قبل از رفتن به استخدامی افتاده'),
						 (109, 10, 9.4, 1450, 'USA', 1998, 'N', 'N', N'داستان های یک گربه و سگ به هم چسبیده'),
						 (110, 12, 7.0, 83, 'USA', 2023, 'Y', 'Y', N'عملیات های مخفیه ذهن یک مامور با بدن فرد دیگر'),
						 (111, 1, 8.7, 95, 'IRI', 1398, 'N', 'N', N'سرقتی که مجراهای خنده داری را رقم میزند'),
						 (112, 1, 9.2, 1080, 'IRI', 1397, 'N', 'N', N'داستان زندگی یک خانواده ایرانی'),
						 (113, 6, 8.8, 102, 'IRI', 1399, 'N', 'N', N'یک فیزیکدان به شدت بیمار که بر روی نظریه ای در مورد سیاهچاله ها و پایان جهان کار می کند'),
						 (114, 13, 8.9, 119, 'USA', 2022, 'Y' ,'Y', N'اما پس از آنکه سروکله همسر سابق و پسر نوجوانش پیدا می شود، زندگی اش به آشوب کشیده می شود'),
						 (115, 13, 8.9, 93, 'IRISH', 2022, 'Y', 'Y', N'دختر آرامی به خاطر خانواده آشفته اش، تابستان را نزد یکی از اقوام مادرش می گذراند'),
						 (116, 6, 9.6, 750, 'IRI', 1401, 'N', 'N', N'«هاتف» و «حاتم» دو برادر از یک خانواده سرشناس ساکن سیاهرود هستند'),
						 (117, 9, 4.8, 78, 'USA', 2022, 'Y', 'Y', N'هپ پس از آشنایی با مینا او را به خانه می رساند'),
						 (118, 13, 6.9, 20, 'IRI', 1400, 'N', 'N', N'تمامی اتفاقات فیلم در یک خانه قدیمی و مرموز رخ می دهد'),
						 (119, 14, 8.9, 101, 'USA', 2022, 'Y' ,'Y', N'کلویی دانشجوی جرم شناسی است که با تظاهر به مرگ، برای به دست آوردن مدرکی به سردخانه نفوذ می کند'),
						 (120, 2, 7.2, 85, 'IRI', 1365, 'N', 'N', N'به سه مرحله تولد، زندگی و مرگ انسان‎ها در سطوح یا طبقات اقتصادی بسیار ضعیف جامعه می‎پردازد')

GO
INSERT INTO [Producer]([MovieId], [FirstName], [LastName], [Role]) 
				VALUES(100, N'فیل', N'بلتنبرگر', N'کارگردان'),
					  (100, N'فیل', N'بلتنبرگر', N'تهیه کننده'),
					  (100, N'فیل', N'بلتنبرگر', N'نویسنده'),
					  (100, N'کریستف', N'اونتربرگر', N'آهنگساز'),
					  (100, N'دنیل', N'ترویر', N'فیلمبردار'),
					  
					  (101, N'علی', N'عطشانی', N'کارگردان'),
					  (101, N'علی', N'عطشانی', N'تهیه کننده'),
					  (101, N'مسعود', N'احمدیان', N'نویسنده'),
					  (101, N'کارن', N'همایون فر', N'آهنگساز'),
					  (101, N'محمود', N'عطشانی', N'فیلمبردار'),
					  (101, N'علی', N'عطشانی', N'تدوین گر'),

					  (102, N'توماس', N'مارچیز', N'کارگردان'),
					  (102, N'توماس', N'مارچیز', N'تهیه کننده'),
					  (102, N'توماس', N'مارچیز', N'نویسنده'),
					  (102, N'یویجی', N' یانسن', N'آهنگساز'),
					  (102, N'دانکن ', N'کول', N'فیلمبردار'),
					 
					  (103, N'مجید', N'عزیزی', N'کارگردان'),
					  (103, N'مجید', N'عزیزی', N'تهیه کننده'),

					  (104, N'رابرت', N'کولن', N'کارگردان'),
					  (104, N'چپمن', N'مدوکس', N'تهیه کننده'),
					  (104, N'مارک', N'بانکر', N'نویسنده'),
					  (104, N'سانچ', N'سن', N'آهنگساز'),
					  (104, N'استوین', N'فرای', N'صدا پیشه'),
					  (104, N'سوژان', N'بلیک', N'تدوین گر'),

					  (105, N'یژی', N'اسکولیموفسکی', N'کارگردان'),
					  (105, N'یژی', N'اسکولیموفسکی', N'تهیه کننده'),
					  (105, N'یژی', N'اسکولیموفسکی', N'نویسنده'),
					  (105, N'پاویو', N' میکیتین', N'آهنگساز'),
					  (105, N'مایکل', N'دایمک', N'فیلمبردار'),

					  (106, N'سامان', N'مقدم', N'کارگردان'),
					  (106, N'مرتضی', N'شایسته', N'تهیه کننده'),
					  (106, N'پیمان', N'قاسم خانی', N'نویسنده'),
					  (106, N'امیر', N'توسلی', N'آهنگساز'),
					  (106, N'تورج', N'منصوری', N'فیلمبردار'),

					  (107, N'محمد', N'کارت', N'کارگردان'),
					  (107, N'مازیار', N'هاشمی', N'تهیه کننده'),
					  (107, N'پدرام', N'پورامیری', N'نویسنده'),
					  (107, N'بامداد', N'افشار', N'آهنگساز'),
					  (107, N'سامان', N'لطفیان', N'فیلمبردار'),
					  (107, N'محمد', N'کارت', N'طراح لباس'),
					  (107, N'مجید', N'طالبی', N'عکاس'),
					  (107, N'مسعود', N'زمانی', N'مدیر تولید'),
					  (107, N'ماریا', N'میرنژاد', N'منشی صحنه'),

					  (108, N'مصطفی', N'کیایی', N'کارگردان'),
					  (108, N'مصطفی', N'کیایی', N'تهیه کننده'),
					  (108, N'مصطفی', N'کیایی', N'نویسنده'),
					  (108, N'آرمان', N'موسی پور', N'آهنگساز'),
					  (108, N'مهدی', N'جعفری', N'فیلمبردار'),

					  (109, N'پیتر', N'هانان', N'کارگردان'),
					  (109, N'رابرت', N'پرتر', N'کارگردان'),
					  (109, N'پیتر', N'هانان', N'تهیه کننده'),

					  (110, N'جسی', N'اطلس', N'کارگردان'),
					  (110, N'الکس', N'اکرت', N'تهیه کننده'),
					  (110, N'جسی', N'اطلس', N'نویسنده'),
					  (110, N'مارک', N'توارسون', N'آهنگساز'),
					  (110, N'براین', N'کاس', N'فیلمبردار'),
					  (110, N'فیلیپ', N'هریسون', N'تدوین گر'),

					  (111, N'مسعود', N'اطیابی', N'کارگردان'),
					  (111, N'ابراهیم', N'عامریان', N'تهیه کننده'),
					  (111, N'حمزه', N'صالحی', N'نویسنده'),
					  (111, N'امیر', N'توسلی', N'آهنگساز'),
					  (111, N'امیر', N'کریمی', N'فیلمبردار'),
					  (111, N'حسن', N'ایوبی', N'تدوین گر'),

					  (112, N'سیروس', N'مقدم', N'کارگردان'),
					  (112, N'الهام', N'غفوری', N'تهیه کننده'),
					  (112, N'محسن', N'تنابنده', N'نویسنده'),
					  (112, N'فرشاد', N'گل سفیدی', N'فیلمبردار'),

					  (113, N'آیدا', N'پناهنده', N'کارگردان'),
					  (113, N'آیدا', N'پناهنده', N'تهیه کننده'),
					  (113, N'آیدا', N'پناهنده', N'نویسنده'),
					  (113, N'علیرضا', N'افکاری', N'آهنگساز'),
					  (113, N'فرشاد', N'محمدی', N'فیلمبردار'),
					  (113, N'ارسلان', N'امیری', N'تدوین گر'),

					  (114, N'فلوریان', N'زلر', N'کارگردان'),
					  (114, N'کریستوفر', N'همپتون', N'تهیه کننده'),
					  (114, N'آین', N'کننینگ', N'نویسنده'),
					  (114, N'هانس', N'زیمر', N'آهنگساز'),
					  (114, N'بن', N'اسمیتارد', N'فیلمبردار'),
					  (114, N'یورگوس', N'لامپرینوس', N'تدوین گر'),
					  (115, N'کالم', N'پرید', N'کارگردان'),
					  (115, N'کالم', N'پرید', N'تهیه کننده'),
					  (115, N'کلیونا', N'کرولی', N'نویسنده'),
					  (115, N'استوین', N'رنیکس', N'آهنگساز'),
					  (115, N'کیت', N'مکالا', N'فیلمبردار'),
					  (115, N'جان', N'مورفی', N'تدوین گر'),

					  (116, N'شهرام', N'شاه حسینی', N'کارگردان'),
					  (116, N'مجید', N'مولایی', N'تهیه کننده'),
					  (116, N'سینا', N'شفیعی', N'نویسنده'),
					  (116, N'بامداد', N'افشار', N'آهنگساز'),
					  (116, N'آرش', N'رمضانی', N'فیلمبردار'),
					  (116, N'عماد', N'خدابخش', N'تدوین گر'),
					  (116, N'امید', N'صالحی', N'عکاس'),

					  (117, N'نیل', N'لابوت', N'کارگردان'),
					  (117, N'تیم', N'هارمز', N'تهیه کننده'),
					  (117, N'نیل', N'لابوت', N'نویسنده'),
					  (117, N'آدام', N'بوسارگ', N'آهنگساز'),
					  (117, N'دنیل', N'کتز', N'فیلمبردار'),
					  (117, N'بریجت', N'دورنفورد', N'تدوین گر'),
					  
					  (118, N'داریوش', N'جعفری', N'کارگردان'),
					  (118, N'داریوش', N'جعفری', N'تهیه کننده'),
					  (118, N'داریوش', N'جعفری', N'نویسنده'),
					  (118, N'مهدی', N'بیگی', N'فیلمبردار'),

					  (119, N'پاتریک', N'لوسیر', N'کارگردان'),
					  (119, N'آدام', N'میسون', N'تهیه کننده'),
					  (119, N'چارلز', N'برگ', N'نویسنده'),
					  (119, N'استیو', N'مور', N'آهنگساز'),
					  (119, N'مک', N'فیسکن', N'فیلمبردار'),
					 
				   	  (120, N'محسن', N'مخملباف', N'کارگردان'),
					  (120, N'محسن', N'مخملباف', N'تهیه کننده'),
					  (120, N'محسن', N'مخملباف', N'نویسنده'),
					  (120, N'آلبرتو', N'موراویا', N'نویسنده'),
					  (120, N'مجید', N'انتظامی', N'آهنگساز'),
					  (120, N'مهرداد', N'فخیمی', N'فیلمبردار')
					  
									 
GO
INSERT INTO [Actors]([MovieId], [FirstName], [LastName]) 
			  VALUES(100, N'مایکل', N'ایرون ساید'),
			        (100, N'آرنولد', N'وسلو'),
					(100, N'جکسون', N'رادبون'),
					(100, N'خورخه', N'گارسیا'),
					(100, N'جیمز', N'اوربانیاک'),

					(101, N'پژمان', N'بازغی'),
					(101, N'آتیلا', N'پسیانی'),
					(101, N'سیما', N'نیرانداز'),
					(101, N'دنیا', N'مدنی'),
					(101, N'نیما', N'شاهرخ'),

					(102, N'آنا', N'کمپ'),
					(102, N'جان', N'آلس'),
					(102, N'جنیفر', N'لافلور'),
					(102, N'تراویس', N'همر'),
					(102, N'ریچی', N'مونتگومری'),

					(105, N'ساندرا', N'دژیمالسکا'),
					(105, N'ایزابل', N'هوپر'),
					(105, N'لورنزو', N'زورزولو'),
					(105, N'ماتیوش', N'کوشچوکویچ'),
					(105, N'توماس', N'ارگانک'),

					(106, N'فرهاد', N'آییش'),
					(106, N'گوهر', N'خیراندیش'),
					(106, N'رامبد', N'جوان'),
					(106, N'پگاه', N'آهنگرانی'),
					(106, N'امیر', N'جعفری'),
					(106, N'سیروس', N'ابراهیم زاده'),
					(106, N'محمدرضا', N'شریفی نیا'),

					(107, N'نیکی', N'کریمی'),
					(107, N'آبان', N'عسگری'),
					(107, N'پگاه', N'سعیدی'),
					(107, N'شهاب', N'کرلو'),
					(107, N'علی', N'شادمان'),
					(107, N'افشین', N'حسن لو'),
					(107, N'محمد', N'صابری'),
					(107, N'مه لقا', N'باقری'),

					(108, N'بهرام', N'رادان'),
					(108, N'محسن', N'کیایی'),
					(108, N'سحر', N'دولتشاهی'),
					(108, N'بهاره', N'کیان افشار'),
					(108, N'پژمان', N'بازغی'),
					(108, N'رضا', N'کیانیان'),

					(109, N'جیم', N'کامینگز'),
					(109, N'تام', N'کنی'),
					(109, N'کارلوس', N'الازراکی'),
					(109, N'ماریا', N'بمفورد'),
					(109, N'بیلی', N'وست'),
					(109, N'نیکا', N'فاترمن'),
					(109, N'دوایت', N'شولتز'),

					(110, N'بروس', N'ویلیس'),
					(110, N'اندی', N'لو'),
					(110, N'دامینیک', N'پرسل'),
					(110, N'یوگنیا', N'کوزمین'),
					(110, N'مصطفی', N'شکیر'),

					(111, N'مهدی', N'هاشمی'),
					(111, N'رضا', N'عطاران'),
					(111, N'احمد', N'مهرانفر'),
					(111, N'برزو', N'ارجمند'),
					(111, N'شقایق', N'دهقان'),
					(111, N'سیروس', N'همتی'),
					(111, N'شکیب', N'شجره'),
					(111, N'مهسا', N'طهماسبی'),

					(112, N'محسن', N'تنابنده'),
					(112, N'احمد', N'مهران فر'),
					(112, N'علیرضا', N'خمسه'),
					(112, N'ریما', N'رامین فر'),
					(112, N'نسرین', N'نصرتی'),
					(112, N'بهرام', N'افشاری'),

					(113, N'الناز', N'شاکر دوست'),
					(113, N'پارسا', N'پیروز فر'),
					(113, N'هوتن', N'شکیبا'),
					(113, N'سودابه', N'جعفرزاد'),
					(113, N'مهدی', N'فرضیه'),
					(113, N'منوچهر', N'امیری'),
					(113, N'امیر', N'صلج'),
					(113, N'سجاد', N'دولتی'),

					(114, N'ونسا', N'کربی'),
					(114, N'هیو', N'جکمن'),
					(114, N'لوار', N'درن'),
					(114, N'آنتونی', N'هاپکینز'),
					(114, N'هیو', N'کوارشی'),
					
					(115, N'کری', N'کرولی'),
					(115, N'مایکل', N'پتریک'),
					(115, N'کارولین', N'براکن'),
					(115, N'ماریون', N'اودوایر'),
					(115, N'اندرو', N'بنت'),

					(116, N'محسن', N'تنابنده'),
					(116, N'هوتن', N'شکیبا'),
					(116, N'مونا', N'احمدی'),
					(116, N'شهرام', N'قایدی'),
					(116, N'رابعه', N'مدنی'),
					(116, N'آزاده', N'صمدی'),
					(116, N'بابک', N'کریمی'),
					(116, N'سام', N'نوری'),

					(117, N'کیت', N'باسورث'),
					(117, N'جاستین', N'لانگ'),
					(117, N'جیا', N'کراوتین'),
					(117, N'لوسی', N'والترز'),

					(118, N'محمد حسین', N'لطیفی'),
					(118, N'نازنین', N'کیوانی'),
					(118, N'مریم', N'بوبانی'),
					(118, N'امین', N'زارع'),
					(118, N'کارن', N'علی پور'),
					(118, N'حمیدرضا', N'نعیمی'),

					(119, N'بیلی', N'مدیسن'),
					(119, N'جری', N'اوکانل'),
					(119, N'آنتونی', N'تورپل'),
					(119, N'کریس', N'لی'),
					(119, N'کریس', N'باتلر'),

					(120, N'محمود', N'بصیری'),
					(120, N'بهزاد', N'بهزادپور'),
					(120, N'زهره', N'سرمدی'),
					(120, N'اسماعیل', N'سلطانیان')
	


GO
INSERT INTO [User]([FirstName], [LastName], [Age], [Phone], [RegisterDate], [IsActive])
			VALUES(N'علی', N'ساریخانی',24 ,9186121576 , GETDATE(),1),
				  (N'رضا', N'سلطانی',15 ,933438747 , GETDATE(),1),
				  (N'اسلان', N'رضوی',43 ,936435262 , GETDATE(),1),
				  (N'محمد', N'احمدی',23 ,983463562 , GETDATE(),1),
				  (N'فریدون', N'آریایی',55 ,921763373 , GETDATE(),0),
				  (N'اصغر', N'آقایی',47 ,93745272 , GETDATE(),1),
				  (N'شیما', N'اسماعیلی',25 ,93735722 , GETDATE(),1),
				  (N'افسانه', N'بایگان',43 ,937325621 , GETDATE(),1),
				  (N'مهسا', N'امینی',37 ,927652521 , GETDATE(),1),
				  (N'نیکا', N'شاکرمی',19 ,926216181 , GETDATE(),1),
				  (N'نیروانا', N'رسولی',7 ,972625411 , GETDATE(),1),
				  (N'رسول', N'اصغری',49 ,972363511 , GETDATE(),1),
				  (N'ارکیده', N'نیکوکار',28 ,917215161 , GETDATE(),1),
				  (N'شیوا', N'عابدی',27 ,9827624151 , GETDATE(),1),
				  (N'شیما', N'میرزایی',13 ,9762541711 , GETDATE(),1),
				  (N'آرش', N'خانقلی',24 ,98762527332 , GETDATE(),1),
				  (N'امیر', N'یوسفی',52 ,97626521612 , GETDATE(),1),
				  (N'پارسا', N'جعفری',17 ,972561811 , GETDATE(),1),
				  (N'رضا', N'شاملو',27 ,9876236181 , GETDATE(),1),
				  (N'مجیدرضا', N'رهنورد',23 ,9765251256 , GETDATE(),1),
				  (N'سهند', N'دماوندی',58 ,9112625632 , GETDATE(),0),
				  (N'کوروش', N'احمدی',19 ,9125361712 , GETDATE(),1),
				  (N'کسری', N'خاکپور',29 ,9176453728 , GETDATE(),1),
				  (N'مهدی', N'عباسی',33 ,91737466473 , GETDATE(),1),
				  (N'نرگس', N'سلطانی فر',26 ,9736261811 , GETDATE(),1),
				  (N'قاسم', N'زارعین',75 ,9737621621 , GETDATE(),1),
				  (N'کاوه', N'شاملو',31 ,91736363278 , GETDATE(),1),
				  (N'صالح', N'جوزانی',62 ,936371812 , GETDATE(),1),
				  (N'میثم', N'تمار',26 ,9173763563 , GETDATE(),1)

GO
INSERT INTO [UserViews]([UserId], [MovieId])
				 VALUES(1, 101),(1, 103),(1, 107),(1, 119),(1, 117),
					   (2, 101),(2, 105),(2, 109),(2, 111),(2, 112),
					   (3, 100),(3, 108),(3, 106),(3, 103),(3, 102),
					   (4, 120),(4, 119), (4, 117), (4, 111),(4, 112),
					   (5, NULL),
					   (6, 101 ),(6, 102),(6, 103),(6, 107),(6, 109),(6, 111),(6, 117),(6, 119),(6, 120),
					   (7, 120),(7, 112),
					   (8, 102),(8, 105),(8, 111),
					   (9, 119),(9, 115),(9, 102),(9, 120),(9, 109),(9, 107),
					   (10, 100),(10, 105),(10, 104),(10, 103),(10, 119),
					   (11, 105),(11, 120),(11, 115),
					   (12, 101),(12, 119),
					   (13, 117),(13, 118),(13,116),(13,104),(13,109),
					   (14, 105),(14, 117),(14,111),(14, 109),
					   (15, 103),(15, 116),(15,109),(15, 120),(15, 117),
					   (16, 101),(16, 115),(16,103),(16,120),(16,100),(16,114),(16,111),
					   (17, 108),(17, 114),
					   (18, 102),(18, 113),(18,120),(18,107),
					   (19, 101),(19, 111),(19,106),(19,100),(19,109),
					   (20, 102),
					   (21, NULL),
					   (22, 117),(22, 109),(22, 118),(22, 105),
					   (23, 102),(23, 108),(23, 104),(23, 106),(23, 120),(23, 118),
					   (24, 101),(24, 107),(24, 102),(24, 108),(24, 103),(24, 109),(24, 111),(24, 117),
					   (25, 104),(25, 106),
					   (26, 100),(26, 105),(26, 115),
					   (27, 105),(27, 104),(27, 115),(27, 114),(27, 119),
					   (28, 117),(28, 103),(28, 116),(28, 102),(28, 106),(28, 108),(28, 120),(28, 111),
					   (29, 101),(29, 102)


-----------------------------------------------------------------
----------------------------------------------------------------- QUERYIES
--> 1.
-- از نظر من کاربر هایی که فیلمی را تماشا نکرده اند غیر فعال هستند
-- یوزر ای دی 5 و 21 فیلمی را مشاهده نکردن 
GO
USE [dbFilimo]
GO
SELECT [FirstName], [LastName], [Phone]
FROM [User]
WHERE [UserId] NOT IN (SELECT [UserId]
					  FROM [UserViews]
					  WHERE [MovieId] IS NULL)

-- طبق ستون فعال بودن یا نبودن
-- دستور زیر کاربران غیر فعال را نشان میدهد
GO
SELECT [FirstName], [LastName], [Phone]
FROM [User]
WHERE [IsActive] = 0


--> 2.
GO
SELECT [MovieTitle], [GenreTitle],[Year]
FROM [Description] AS D INNER JOIN [Genres] AS G ON D.[GenreId]=G.[GenreId]
						INNER JOIN [Movie] AS M ON D.[MovieId]=M.[MovieId]
WHERE M.[MovieId] IN (SELECT [MovieId]
					FROM (SELECT *
						  FROM [Producer]
						  WHERE [Role]=N'کارگردان')T1
					WHERE [FirstName]=N'سامان' AND [LastName] = N'مقدم')


--> 3.
GO
SELECT COUNT(*) AS 'تعداد فیلم های کمدی اکران شده قبل از 1400'
FROM [Description] AS D INNER JOIN [Movie] AS M ON M.[MovieId] = D.[MovieId]
WHERE M.[MovieTitle] = N'کمدی' AND D.[Year] BETWEEN 1300 AND 1399


--> 4.
GO
SELECT P.[FirstName] , P.[LastName] , S.[MovieTitle]
FROM [Producer] AS P INNER JOIN [Movie] AS M ON P.[MovieId] = M.[MovieId]
					 INNER JOIN [Movie] AS S ON P.[MovieId] = S.[MovieId]
WHERE [Role] = N'کارگردان' AND M.[MovieId] IN (SELECT [MovieId] 
												FROM [User] AS U INNER JOIN [UserViews] AS V ON U.[UserId] = V.[UserId]
												WHERE [FirstName] = N'مهدی' AND [LastName] = N'عباسی')


--> 5.
GO
SELECT [MovieTitle] AS N'نام فیلم هایی که توسط هیچ فردی مشاهده نشده'
FROM [Movie]
WHERE [MovieId]  NOT IN (SELECT M.[MovieId] 
						 FROM [Movie] AS M INNER JOIN [UserViews] AS U ON M.[MovieId]=U.[MovieId])



--> 6.
GO
SELECT [MovieTitle]
FROM [Movie]
WHERE [MovieId] IN (SELECT M.[MovieId] 
				  FROM [Movie] AS M INNER JOIN [UserViews] AS U ON M.[MovieId]=U.[MovieId]
				  GROUP BY M.[MovieId]
				  HAVING COUNT(*) > 2)

--> 7.
GO
SELECT [MovieTitle] AS N'نام سه فیلم برتر از نظر تعداد مشاهده'
FROM [Movie]
WHERE [MovieId] IN(SELECT [MovieId]
				 FROM (SELECT TOP 3 [MovieId] , COUNT(*) AS 'COUNT'
					   FROM [UserViews] 
					   GROUP BY [MovieId]
					   ORDER BY [COUNT] DESC)T1)

--> 8.
GO
SELECT G.[GenreTitle] AS N'پر بازدیدترین ژانر فیلم ها و سریال ها' 
FROM (SELECT TOP 1 [GenreId], COUNT(*) AS 'COUNT'
	  FROM [Description]
	  GROUP BY [GenreId]
	  ORDER BY [COUNT] DESC)T1 INNER JOIN [Genres] AS G ON T1.[GenreId]=G.[GenreId]

--> 9.
GO
DELETE FROM [Movie]
WHERE [MovieId] IN (SELECT [MovieId]
				    FROM [Description] AS D INNER JOIN [Genres] AS G ON D.[GenreId]=G.[GenreId]
				    WHERE G.[GenreTitle] = N'کمدی')


--> 10.
GO
UPDATE [User]
SET [IsActive] = 1
WHERE [IsActive] = 0